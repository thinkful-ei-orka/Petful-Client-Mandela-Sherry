(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{20:function(e,t,n){e.exports=n(33)},21:function(e,t,n){},26:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);n(21);var a=n(0),o=n.n(a),c=n(14),r=n.n(c),i=n(8),l=n(1);n(26);var s=function(){return o.a.createElement("section",{className:"landing"},o.a.createElement("h1",null,"Petful"),o.a.createElement(i.b,{to:"/adoption"},o.a.createElement("button",{type:"button",className:"medium-btn"},"Adopt A Pet")),o.a.createElement("h2",null,"Adopt A Furry Freind"),o.a.createElement("p",null,"Petful is an online adoption agency for cat and dog like creatures. We believe in quality over quantity and thus choose offer a very limited amount of 'cats' and 'dogs' to our clients."),o.a.createElement("h3",null,"How Our Adoption Process Works"),o.a.createElement("p",null,"Once you've added your name to our list, we will show you the cat and dog currently up for adoption as well as the other clients in line. Once it is your turn, you are given a short time to select a cat or dog to adopt. Choose quickly! If you miss your turn you will need to try again at a later time."))},u=n(16),m=n(17),p=n(19),d=n(18),h="https://polar-tor-06893.herokuapp.com",f=(n(32),function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleNameSubmit=function(e){e.preventDefault(),a.setState({adopted:"",addingClients:!1}),a.adoptionTimer=setInterval(a.adopt,5e3);var t=a.state.clientName;fetch("".concat(h,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({personName:t})}).then((function(e){a.getLineQueue(),a.getNextCatDog()})).then(a.setState({clientInLine:!0})).catch((function(e){return console.log("error:",e)}))},a.handleAdoptMeClick=function(e){e.preventDefault();var t=e.target.value;"cat"===t?a.setState({clientSelection:a.state.currentCat}):"dog"===t&&a.setState({clientSelection:a.state.currentDog}),fetch("".concat(h,"/pets"),{method:"DELETE",headers:{"content-type":"application/json"},body:JSON.stringify({petType:t})}).catch((function(e){return console.log("error:",e)})),fetch("".concat(h,"/people"),{method:"DELETE"}).then((function(){return a.setState({clientTurnToSelect:!1})})).catch((function(e){return console.log("error:",e)}))},a.getLineQueue=function(){fetch("".concat(h,"/people")).then((function(e){return e.json()})).then((function(e){return a.setState({lineQueue:e})})).then((function(){if(a.state.lineQueue[0]===a.state.clientName)return a.setState({clientTurnToSelect:!0})})).catch((function(e){return console.log("error:",e)}))},a.getNextCatDog=function(){fetch("".concat(h,"/pets")).then((function(e){return e.json()})).then((function(e){a.setState({currentCat:e[0],currentDog:e[1]})})).catch((function(e){return console.log("error:",e)}))},a.getCurrentCatDog=function(){fetch("".concat(h,"/api/cat")).then((function(e){return e.json()})).then((function(e){a.setState({currentCat:e})})).catch((function(e){return console.log("error:",e)})),fetch("".concat(h,"/api/dog")).then((function(e){return e.json()})).then((function(e){a.setState({currentDog:e})})).catch((function(e){return console.log("error:",e)}))},a.adopt=function(){if(a.state.clientInLine){var e=a.state.clientName;if(0===a.state.lineQueue.filter((function(t){return t===e})).length)return clearInterval(a.adoptionTimer),a.setState({clientInLine:!1,clientTurnToSelect:!1});if(!a.state.clientTurnToSelect){var t=Math.floor(2*Math.random());t=0===t?"cat":"dog",fetch("".concat(h,"/pets"),{method:"DELETE",headers:{"content-type":"application/json"},body:JSON.stringify({petType:t})}).then((function(e){return e.ok?fetch("".concat(h,"/people"),{method:"DELETE"}):e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){return console.log("error:",e)}))}}a.getLineQueue(),a.getNextCatDog()},a.stopAdoptions=function(){clearInterval(a.adopt)},a.addClient=function(){var e="TestClient".concat(Math.floor(88*Math.random()));fetch("".concat(h,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({personName:e})}).then((function(e){a.getLineQueue()})).catch((function(e){return console.log("error:",e)}))},a.onAdoptClick=function(e,t){clearInterval(a.adoptionTimer),fetch("".concat(h,"/pets"),{method:"DELETE",headers:{"content-type":"application/json"},body:JSON.stringify({petType:t})}).then((function(){a.setState({clientName:"",clientTurnToSelect:!1,clientInLine:!1,adopted:e.name})})).then((function(){a.getLineQueue(),a.getNextCatDog()})).catch((function(e){return console.log("error:",e)}))},a.renderLine=function(){var e=[];return a.state.lineQueue.map((function(t){e.push(o.a.createElement("li",{key:t},t))})),e},a.setName=function(e){a.setState({clientName:e.target.value})},a.setAddingClients=function(){a.setState({addingClients:!a.state.addingClients})},a.state={clientName:"",clientInLine:!1,clientTurnToSelect:!1,clientSelection:{},lineQueue:[],currentCat:{},currentDog:{},adopted:"",addingClients:!1},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.getLineQueue(),this.setState({addingCients:!1})}},{key:"render",value:function(){var e=this;return 2===this.state.lineQueue.length&&!1===this.state.addingClients&&(this.setAddingClients(),this.clientTimer=setInterval(this.addClient,5e3)),this.state.lineQueue.length>=5&&(this.state.adopted.length>0||!this.state.clientInLine)&&clearInterval(this.clientTimer),o.a.createElement("section",{className:"adoption"},o.a.createElement("h1",null,"Petful"),o.a.createElement("form",{className:"add-name-form",onSubmit:this.handleNameSubmit},o.a.createElement("label",{htmlFor:"client-name"},"Enter Your Name"),o.a.createElement("input",{type:"text",onChange:this.setName,id:"client-name",className:"client-name-field",required:!0}),o.a.createElement("button",{type:"submit",className:"add-name-button small-btn"},"Jump In Line")),this.state.lineQueue&&o.a.createElement("div",{className:"client-line"},o.a.createElement("ol",null,this.renderLine())),this.state.adopted.length>0&&o.a.createElement("p",{className:"adopted"},"Congrats! You adopted ",this.state.adopted,"!"),this.state.clientInLine||this.state.adopted.length>0?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"pet-selection"},o.a.createElement("div",{className:"cat-info container"},this.state.clientTurnToSelect&&o.a.createElement("button",{className:"adopt-button",type:"button",onClick:function(){return e.onAdoptClick(e.state.currentCat,"cat")}},"Adopt ",this.state.currentCat.name,"!"),o.a.createElement("img",{className:"animal-image",src:this.state.currentCat.imageURL,alt:this.state.currentCat.description}),o.a.createElement("p",{className:"pet-info"},"My Name: ",this.state.currentCat.name),o.a.createElement("p",{className:"pet-info"},"Description: ",this.state.currentCat.description),o.a.createElement("p",{className:"pet-info"},"Breed: ",this.state.currentCat.breed),o.a.createElement("p",{className:"pet-info"},"Gender: ",this.state.currentCat.gender),o.a.createElement("p",{className:"pet-info"},"Age: ",this.state.currentCat.age),o.a.createElement("p",{className:"pet-info"},"My Story: ",this.state.currentCat.story)),o.a.createElement("div",{className:"dog-info container"},this.state.clientTurnToSelect&&o.a.createElement("button",{className:"adopt-button",type:"button",onClick:function(){return e.onAdoptClick(e.state.currentDog,"dog")}},"Adopt ",this.state.currentDog.name,"!"),o.a.createElement("img",{className:"animal-image",src:this.state.currentDog.imageURL,alt:this.state.currentDog.description}),o.a.createElement("p",{className:"pet-info"},"My Name: ",this.state.currentDog.name),o.a.createElement("p",{className:"pet-info"},"Description: ",this.state.currentDog.description),o.a.createElement("p",{className:"pet-info"},"Breed: ",this.state.currentDog.breed),o.a.createElement("p",{className:"pet-info"},"Gender: ",this.state.currentDog.gender),o.a.createElement("p",{className:"pet-info"},"Age: ",this.state.currentDog.age),o.a.createElement("p",{className:"pet-info"},"My Story: ",this.state.currentDog.story)))):null)}}]),n}(a.Component));var g=function(){return o.a.createElement("main",{className:"app"},o.a.createElement(i.a,null,o.a.createElement(l.a,{path:"/",exact:!0,component:s}),o.a.createElement(l.a,{path:"/adoption",component:f})))};r.a.render(o.a.createElement(g,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.14a20b37.chunk.js.map